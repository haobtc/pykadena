from kadena.types import BlockHeader

header = bytes.fromhex(
    "05000000d3a6e63c5b5767267eb9021d98be2333d4af4bd3d1df740f7fffc70a000000000000000000000000fa5b1b55de9605006d4503feb42b2494cacf9bd1b1998300c53cc31c3c0601a427e159a586befc3e030000000000022442d2f610b4db056a254b8c34378fdab681651c379a9d82b07eee5b242775060000007972e7a310a9941a5f77c5b864cc21ae95a9c72712f5e9d876b79dd7db45280f090000008019cf71bcdbe10621b75d9364a3a3ebe8a5bd546bc4924e61a3aa1672994ec2d3a6e63c5b5767267eb9021d98be2333d4af4bd3d1df740f7fffc70a0000000077c681d5bb4290eb0fa481bc8b1d703883c0e3e4fb41ad78012762a15a1ffbe105000000b452fc44ba010100000000000000000000000000000000000000000000000000307100000000000005000000aadbc3f0dd9605000000000000000000"
)

decoded_header = BlockHeader(
    chain=5,
    hash_target="d3a6e63c5b5767267eb9021d98be2333d4af4bd3d1df740f7fffc70a00000000",
    nonce=0,
    time=1573256538315770,
    parent="6d4503feb42b2494cacf9bd1b1998300c53cc31c3c0601a427e159a586befc3e",
    adjacents={
        0: "022442d2f610b4db056a254b8c34378fdab681651c379a9d82b07eee5b242775",
        6: "7972e7a310a9941a5f77c5b864cc21ae95a9c72712f5e9d876b79dd7db45280f",
        9: "8019cf71bcdbe10621b75d9364a3a3ebe8a5bd546bc4924e61a3aa1672994ec2",
    },
    payload="77c681d5bb4290eb0fa481bc8b1d703883c0e3e4fb41ad78012762a15a1ffbe1",
    weight=283374509642420,
    height=28976,
    version=5,
    epoch_start=1573254854859690,
    flags=0,
    difficulty=101983759913,
)


def test_block_header():
    assert BlockHeader.from_binary(header) == decoded_header
